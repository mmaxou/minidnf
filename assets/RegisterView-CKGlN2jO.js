import{_ as U,c as k,w as s,r as t,a as n,i as q,u as M,o as R,b as l,d as v,e as N,t as S}from"./index-DYD77XOx.js";const j={name:"RegisterView",setup(){const V=q("authService"),o=M(),x=t(!0),e=t(""),_=t(""),m=t(""),p=t(""),c=t(!1),d=t(""),i=t(!1),w=t(!1),b=[a=>!!a||"用户名不能为空",a=>a.length>=3||"用户名长度不能少于3个字符"],u=[a=>!!a||"电子邮箱不能为空",a=>/.+@.+\..+/.test(a)||"请输入有效的电子邮箱地址"],g=[a=>!!a||"密码不能为空",a=>a.length>=6||"密码长度不能少于6个字符"],y=[a=>!!a||"确认密码不能为空",a=>a===m.value||"两次输入的密码不一致"],f=t(null);return{valid:x,username:e,email:_,password:m,confirmPassword:p,loading:c,errorMessage:d,showPassword:i,showConfirmPassword:w,usernameRules:b,emailRules:u,passwordRules:g,confirmPasswordRules:y,register:async()=>{if(f.value.validate()){c.value=!0,d.value="";try{const a=await V.register(e.value,_.value,m.value);a.success?(alert("注册成功，即将为您跳转到主页"),o.push("/home")):d.value=a.error||"注册失败，请稍后再试"}catch(a){d.value="注册过程中发生错误",console.error("注册错误:",a)}finally{c.value=!1}}},formRef:f}}};function z(V,o,x,e,_,m){const p=n("v-toolbar-title"),c=n("v-toolbar"),d=n("v-alert"),i=n("v-text-field"),w=n("v-form"),b=n("v-card-text"),u=n("v-btn"),g=n("router-link"),y=n("v-spacer"),f=n("v-card-actions"),P=n("v-card"),a=n("v-col"),C=n("v-row"),h=n("v-container");return R(),k(h,{class:"fill-height register-container",fluid:""},{default:s(()=>[l(C,{align:"center",justify:"center",class:"fill-height ma-0"},{default:s(()=>[l(a,{cols:"12",sm:"10",md:"8",lg:"6",xl:"4",class:"pa-4"},{default:s(()=>[l(P,{class:"elevation-12 register-card"},{default:s(()=>[l(c,{color:"primary",dark:"",flat:""},{default:s(()=>[l(p,null,{default:s(()=>o[7]||(o[7]=[v("注册")])),_:1})]),_:1}),l(b,null,{default:s(()=>[e.errorMessage?(R(),k(d,{key:0,type:"error",variant:"tonal",class:"mt-3",density:"compact"},{default:s(()=>[v(S(e.errorMessage),1)]),_:1})):N("",!0),l(w,{ref:"formRef",modelValue:e.valid,"onUpdate:modelValue":o[6]||(o[6]=r=>e.valid=r),"lazy-validation":"",class:"mt-3"},{default:s(()=>[l(i,{modelValue:e.username,"onUpdate:modelValue":o[0]||(o[0]=r=>e.username=r),rules:e.usernameRules,label:"用户名","prepend-icon":"mdi-account",variant:"outlined",density:"comfortable",required:"",class:"mb-4","hide-details":"auto",disabled:e.loading},null,8,["modelValue","rules","disabled"]),l(i,{modelValue:e.email,"onUpdate:modelValue":o[1]||(o[1]=r=>e.email=r),rules:e.emailRules,label:"电子邮箱","prepend-icon":"mdi-email",variant:"outlined",density:"comfortable",required:"",class:"mb-4","hide-details":"auto",disabled:e.loading},null,8,["modelValue","rules","disabled"]),l(i,{modelValue:e.password,"onUpdate:modelValue":o[2]||(o[2]=r=>e.password=r),rules:e.passwordRules,label:"密码","prepend-icon":"mdi-lock","append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password","onClick:append":o[3]||(o[3]=r=>e.showPassword=!e.showPassword),variant:"outlined",density:"comfortable",required:"",class:"mb-4","hide-details":"auto",disabled:e.loading},null,8,["modelValue","rules","append-icon","type","disabled"]),l(i,{modelValue:e.confirmPassword,"onUpdate:modelValue":o[4]||(o[4]=r=>e.confirmPassword=r),rules:e.confirmPasswordRules,label:"确认密码","prepend-icon":"mdi-lock-check","append-icon":e.showConfirmPassword?"mdi-eye":"mdi-eye-off",type:e.showConfirmPassword?"text":"password","onClick:append":o[5]||(o[5]=r=>e.showConfirmPassword=!e.showConfirmPassword),variant:"outlined",density:"comfortable",required:"",class:"mb-2","hide-details":"auto",disabled:e.loading},null,8,["modelValue","rules","append-icon","type","disabled"])]),_:1},8,["modelValue"])]),_:1}),l(f,{class:"pb-4 px-4"},{default:s(()=>[l(g,{to:"/",class:"text-decoration-none"},{default:s(()=>[l(u,{variant:"text",color:"primary",size:"small",disabled:e.loading},{default:s(()=>o[8]||(o[8]=[v(" 返回登录 ")])),_:1},8,["disabled"])]),_:1}),l(y),l(u,{color:"primary",onClick:e.register,loading:e.loading,disabled:!e.valid||e.loading,"min-width":"80"},{default:s(()=>o[9]||(o[9]=[v(" 注册 ")])),_:1},8,["onClick","loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const D=U(j,[["render",z],["__scopeId","data-v-7a348a5b"]]);export{D as default};
